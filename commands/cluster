#!/bin/bash

set -e
. "$GRPL_WORKDIR/utils/help_menus"

cli_help() {
  grpl_cluster_cli_help
  exit 0
}

generate_web_doc() {
  grpl_cluster_cli_help "web-doc"
  exit 0
}

install_prerequisite

case "$1" in
  status|s)
    "$GRPL_WORKDIR/commands/cluster_commands/status" $(echo $@ | sed 's,status,,g' | sed 's,s ,,') | tee -ia "$GRPL_WORKDIR/logs/cluster_status.log"
    ;;
  install|i)
    "$GRPL_WORKDIR/commands/cluster_commands/install" $(echo $@ | sed 's,install,,g' | sed 's,i ,,') | tee -ia "$GRPL_WORKDIR/logs/cluster_install.log"
    ;;
  create|c)
    "$GRPL_WORKDIR/commands/cluster_commands/create" $(echo $@ | sed 's,create,,g' | sed 's,c ,,') | tee -ia "$GRPL_WORKDIR/logs/cluster_create.log"
    ;;
  *)
    cli_help
    ;;
esac
